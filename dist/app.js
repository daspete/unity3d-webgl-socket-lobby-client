!function e(t,o,n){function i(c,s){if(!o[c]){if(!t[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(r)return r(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=o[c]={exports:{}};t[c][0].call(l.exports,function(e){var o=t[c][1][e];return i(o?o:e)},l,l.exports,e,t,o,n)}return o[c].exports}for(var r="function"==typeof require&&require,c=0;c<n.length;c++)i(n[c]);return i}({1:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=function(){function e(){n(this,e),this.socket=null,this.roomID=null,this.playerID=null,this.unityGameReceiverObject="GameManager",window.gameClient=this}return i(e,[{key:"SetPlayerID",value:function(e){this.playerID=e}},{key:"StartReceiver",value:function(e){this.socket=e.socket,this.roomID=e.roomID,this.StartClient()}},{key:"StartClient",value:function(){}},{key:"SendToGame",value:function(e,t){SendMessage(this.unityGameReceiverObject,e,t)}}]),e}();o.default=r},{}],2:[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(o,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=e("./GameClient.js"),u=n(a),l=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),s(t,[{key:"StartClient",value:function(){this.socket.on("set-goal-position",this.OnSetGoalPosition.bind(this)),this.socket.on("player-won-round",this.OnPlayerWonRound.bind(this)),this.socket.on("player-lost-round",this.OnPlayerLostRound.bind(this))}},{key:"SendPlayerClick",value:function(e){this.socket.emit("player-got-position",e)}},{key:"OnSetGoalPosition",value:function(e){this.SendToGame("SocketSetGoalPosition",JSON.stringify(e))}},{key:"OnPlayerWonRound",value:function(){this.SendToGame("SocketPlayerWonRound")}},{key:"OnPlayerLostRound",value:function(){this.SendToGame("SocketPlayerLostRound")}}]),t}(u.default);o.default=l},{"./GameClient.js":1}],3:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=function(){function e(t){n(this,e),this.unityWebSocketLobbyGameObject="WebGLSocketLobby",this.config={},this.socket=null,this.roomSocket=null,this.connectionTimeout=10,this.currentConnectionTimeout=0,this.connectionID="",this.roomID=null,this.gameServerUrl="",this.gameClient=t}return i(e,[{key:"Send",value:function(e,t){SendMessage(this.unityWebSocketLobbyGameObject,e,t)}},{key:"SetConfig",value:function(e){this.config=JSON.parse(e)}},{key:"Connect",value:function(e){this.gameServerUrl="http://"+e+"/";var t=document.createElement("script");t.setAttribute("src",this.gameServerUrl+"socket.io/socket.io.js"),document.head.appendChild(t),this.SocketIOCheck()}},{key:"SocketIOCheck",value:function(){return"undefined"==typeof io?(this.currentConnectionTimeout++,void(this.currentConnectionTimeout==this.connectionTimeout?this.Send("SocketConnectionTimeout"):setTimeout(this.SocketIOCheck.bind(this),1e3))):void this.ConnectToGameServer()}},{key:"ConnectToGameServer",value:function(){this.currentConnectionTimeout=0,this.socket=io.connect(this.gameServerUrl),this.socket.on("connect",this.OnConnected.bind(this)),this.socket.on("disconnect",this.OnDisconnected.bind(this))}},{key:"JoinLobby",value:function(){this.roomSocket=io.connect(this.gameServerUrl+"rooms"),this.roomSocket.on("connect",this.OnConnectedToRoom.bind(this)),this.roomSocket.on("get-room-list",this.GetRoomList.bind(this)),this.roomSocket.on("get-player-list",this.GetPlayerList.bind(this)),this.roomSocket.on("start-game",this.OnGameStarted.bind(this)),this.roomSocket.on("room-is-ready",this.OnRoomReady.bind(this))}},{key:"CreateRoom",value:function(e){this.roomSocket.emit("create-room",{roomName:e},this.OnRoomCreated.bind(this))}},{key:"OnRoomCreated",value:function(e){this.Send("SocketRoomCreated",JSON.stringify(e))}},{key:"JoinRoom",value:function(e){this.roomSocket.emit("join-room",{roomID:e},this.OnRoomJoined.bind(this))}},{key:"OnRoomJoined",value:function(e){this.Send("SocketRoomJoined",JSON.stringify(e))}},{key:"LeaveRoom",value:function(e){this.roomSocket.emit("leave-room",{roomID:e},this.OnLeftRoom.bind(this))}},{key:"OnLeftRoom",value:function(){this.Send("SocketLeftRoom")}},{key:"GetRoomList",value:function(){this.roomSocket.emit("get-room-list",this.OnGotRoomList.bind(this))}},{key:"OnGotRoomList",value:function(e){this.Send("SocketGotRoomList",JSON.stringify(e))}},{key:"GetPlayerList",value:function(e){this.roomSocket.emit("get-player-list",{roomID:e},this.OnGotPlayerList.bind(this))}},{key:"OnGotPlayerList",value:function(e){this.Send("SocketGotPlayerList",JSON.stringify(e))}},{key:"UpdatePlayer",value:function(e){this.roomSocket.emit("update-player",{updateData:e})}},{key:"OnRoomReady",value:function(){this.Send("SocketRoomReady")}},{key:"StartGame",value:function(e){this.roomID=e,this.roomSocket.emit("start-game",{roomID:e},this.OnGameStarted.bind(this))}},{key:"OnGameStarted",value:function(){this.gameClient.SetPlayerID(this.connectionID),this.gameClient.StartReceiver({socket:this.roomSocket,roomID:this.roomID}),this.Send("SocketStartedGame")}},{key:"OnConnected",value:function(){this.socket.emit("set-config",{config:this.config}),this.socket.emit("get-connection-id",this.OnGotConnectionID.bind(this))}},{key:"OnGotConnectionID",value:function(e){this.connectionID=e,this.JoinLobby()}},{key:"OnDisconnected",value:function(){this.roomID=null,this.Send("SocketDisconnected")}},{key:"OnConnectedToRoom",value:function(){this.Send("SocketConnected",this.connectionID)}}]),e}();o.default=r},{}],4:[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=e("./WebSocketLobby/WebSocketLobby.js"),r=n(i),c=e("./Game/MyGameClient.js"),s=n(c);window.webglSocketLobby=new r.default(new s.default)},{"./Game/MyGameClient.js":2,"./WebSocketLobby/WebSocketLobby.js":3}]},{},[4]);
//# sourceMappingURL=app.js.map
